# Feature Specification: Web App to Manage Albums

**Feature Branch**: `001-system-design`  
**Created**: September 16, 2025  
**Status**: Draft  
**Input**: User description: 
```
"Ok, I need a web app to manage albums which is deployed to AWS with the following requirements: 
- CRUD operations for images 
- CRUD for albums with multiple images inside 

The initial plan is to have: 
- Backend deployed to Lambda (plan is to use Python with Fast API) 
- The frontend will use a basic combo HTML + Javascript so we can just have backend generate it 
- The web app should be a SPA 
- The Lambdas would be connected to a S3 bucket and have access to it 
- The login and credentials will be handled by AWS Cognito (to minimize the need of a database to store user data) 

The most important requirements are keep-it-simple and as-cheap-as-possible Thing to consider: 
- Is it possible to tie the credential (or any unique ID) of an user managed by Cognito to the images/albums created/uploaded by that user?"
```

---

## User Scenarios & Testing *(mandatory)*

### Primary User Story
As a user, I want to manage my photo albums by creating albums, uploading images to them, viewing them, editing details, and deleting when needed, all through a simple web app deployed on AWS, using Cognito for authentication to keep it cheap and simple.

### Acceptance Scenarios
1. **Given** a user is logged in via Cognito, **When** they create a new album, **Then** the album is created and associated with their user ID.
2. **Given** an album exists, **When** the user uploads an image to it, **Then** the image is stored in S3 and linked to the album.
3. **Given** an album has images, **When** the user views the album, **Then** they see all images in a SPA interface.
4. **Given** an image exists, **When** the user edits its details, **Then** the changes are saved.
5. **Given** an album or image exists, **When** the user deletes it, **Then** it is removed and S3 storage is cleaned up.

### Edge Cases
- What happens when a user tries to access another user's albums?
   - As we use AWS service for authentication, the service will return a "sub" claim, which is a unique and consistent identifier for the user. This means albums and images can be securely tied to this ID, preventing cross-user access.

- How does the system handle large image uploads?
   - Each user can upload images up 10MB in size. If an image exceeds this limit, the system will reject the upload and notify the user.
   - The storage space available to each user is capped at 500MB (as this app is for demo purposes). If a user exceeds this limit, they will be informed and prevented from uploading more images until they delete existing ones.

- What if S3 upload fails?
   - The system will catch the error and return a user-friendly message indicating the upload failed, prompting the user to try again later.

- Is there a limit on number of albums or images per user? 
   - There would not be a limit on the number of images. However, the total storage used by a user is capped at 500MB and the number of albums is capped at 10.

## Requirements *(mandatory)*

### Functional Requirements
- **FR-001**: System MUST allow users to create albums.
- **FR-002**: System MUST allow users to upload images to albums.
- **FR-003**: System MUST allow users to view albums and their images.
- **FR-004**: System MUST allow users to edit album and image details.
- **FR-005**: System MUST allow users to delete albums and images.
- **FR-006**: System MUST authenticate users via AWS Cognito.
- **FR-007**: System MUST associate albums and images with the authenticated user's unique ID.
- **FR-008**: System MUST store images in S3 bucket.
- **FR-009**: System MUST provide a SPA frontend generated by backend.
- **FR-010**: System MUST be deployed to AWS Lambda for backend.
- **FR-011**: System MUST minimize costs by avoiding unnecessary databases.

*Note: Some requirements include implementation details as per user plan, but ideally should be abstracted.*

### Key Entities *(include if feature involves data)*
- **User**: Represents an authenticated user from Cognito, with unique ID.
- **Album**: A collection of images, owned by a user, with name and description.
- **Image**: A file uploaded to S3, linked to an album, with metadata like name, description.
